<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="HttpClientFactory.html">HttpClientFactory</a><ul class='methods'><li data-type='method'><a href="HttpClientFactory.html#batch">batch</a></li><li data-type='method'><a href="HttpClientFactory.html#cleanUp">cleanUp</a></li><li data-type='method'><a href="HttpClientFactory.html#connect">connect</a></li><li data-type='method'><a href="HttpClientFactory.html#end">end</a></li><li data-type='method'><a href="HttpClientFactory.html#request">request</a></li><li data-type='method'><a href="HttpClientFactory.html#serverDisconnected">serverDisconnected</a></li><li data-type='method'><a href="HttpClientFactory.html#subscribe">subscribe</a></li><li data-type='method'><a href="HttpClientFactory.html#unsubscribe">unsubscribe</a></li><li data-type='method'><a href="HttpClientFactory.html#unsubscribeAll">unsubscribeAll</a></li></ul></li><li><a href="HttpClientProtocol.html">HttpClientProtocol</a><ul class='methods'><li data-type='method'><a href="HttpClientProtocol.html#batch">batch</a></li><li data-type='method'><a href="HttpClientProtocol.html#connect">connect</a></li><li data-type='method'><a href="HttpClientProtocol.html#end">end</a></li><li data-type='method'><a href="HttpClientProtocol.html#getBatchResponse">getBatchResponse</a></li><li data-type='method'><a href="HttpClientProtocol.html#getResponse">getResponse</a></li><li data-type='method'><a href="HttpClientProtocol.html#gotBatchResponse">gotBatchResponse</a></li><li data-type='method'><a href="HttpClientProtocol.html#handleBatch">handleBatch</a></li><li data-type='method'><a href="HttpClientProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="HttpClientProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="HttpClientProtocol.html#handleResponse">handleResponse</a></li><li data-type='method'><a href="HttpClientProtocol.html#listen">listen</a></li><li data-type='method'><a href="HttpClientProtocol.html#message">message</a></li><li data-type='method'><a href="HttpClientProtocol.html#notify">notify</a></li><li data-type='method'><a href="HttpClientProtocol.html#rejectPendingCalls">rejectPendingCalls</a></li><li data-type='method'><a href="HttpClientProtocol.html#request">request</a></li><li data-type='method'><a href="HttpClientProtocol.html#send">send</a></li><li data-type='method'><a href="HttpClientProtocol.html#setConnector">setConnector</a></li><li data-type='method'><a href="HttpClientProtocol.html#verifyData">verifyData</a></li><li data-type='method'><a href="HttpClientProtocol.html#write">write</a></li></ul></li><li><a href="HttpServerFactory.html">HttpServerFactory</a><ul class='methods'><li data-type='method'><a href="HttpServerFactory.html#buildProtocol">buildProtocol</a></li><li data-type='method'><a href="HttpServerFactory.html#close">close</a></li><li data-type='method'><a href="HttpServerFactory.html#listen">listen</a></li><li data-type='method'><a href="HttpServerFactory.html#setServer">setServer</a></li><li data-type='method'><a href="HttpServerFactory.html#setupListeners">setupListeners</a></li></ul></li><li><a href="HttpServerProtocol.html">HttpServerProtocol</a><ul class='methods'><li data-type='method'><a href="HttpServerProtocol.html#clientConnected">clientConnected</a></li><li data-type='method'><a href="HttpServerProtocol.html#getResult">getResult</a></li><li data-type='method'><a href="HttpServerProtocol.html#handleBatchRequest">handleBatchRequest</a></li><li data-type='method'><a href="HttpServerProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="HttpServerProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="HttpServerProtocol.html#handleRequest">handleRequest</a></li><li data-type='method'><a href="HttpServerProtocol.html#validateMessage">validateMessage</a></li><li data-type='method'><a href="HttpServerProtocol.html#validateRequest">validateRequest</a></li><li data-type='method'><a href="HttpServerProtocol.html#writeToClient">writeToClient</a></li></ul></li><li><a href="JsonRpcClientFactory.html">JsonRpcClientFactory</a><ul class='methods'><li data-type='method'><a href="JsonRpcClientFactory.html#batch">batch</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#cleanUp">cleanUp</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#connect">connect</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#end">end</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#request">request</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#serverDisconnected">serverDisconnected</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#subscribe">subscribe</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#unsubscribe">unsubscribe</a></li><li data-type='method'><a href="JsonRpcClientFactory.html#unsubscribeAll">unsubscribeAll</a></li></ul></li><li><a href="JsonRpcClientProtocol.html">JsonRpcClientProtocol</a><ul class='methods'><li data-type='method'><a href="JsonRpcClientProtocol.html#batch">batch</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#connect">connect</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#end">end</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#getBatchResponse">getBatchResponse</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#getResponse">getResponse</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#gotBatchResponse">gotBatchResponse</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#handleBatch">handleBatch</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#handleResponse">handleResponse</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#listen">listen</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#message">message</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#notify">notify</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#rejectPendingCalls">rejectPendingCalls</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#request">request</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#send">send</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#setConnector">setConnector</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#verifyData">verifyData</a></li><li data-type='method'><a href="JsonRpcClientProtocol.html#write">write</a></li></ul></li><li><a href="JsonRpcServerFactory.html">JsonRpcServerFactory</a><ul class='methods'><li data-type='method'><a href="JsonRpcServerFactory.html#buildProtocol">buildProtocol</a></li><li data-type='method'><a href="JsonRpcServerFactory.html#close">close</a></li><li data-type='method'><a href="JsonRpcServerFactory.html#listen">listen</a></li><li data-type='method'><a href="JsonRpcServerFactory.html#setServer">setServer</a></li><li data-type='method'><a href="JsonRpcServerFactory.html#setupListeners">setupListeners</a></li></ul></li><li><a href="JsonRpcServerProtocol.html">JsonRpcServerProtocol</a><ul class='methods'><li data-type='method'><a href="JsonRpcServerProtocol.html#clientConnected">clientConnected</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#getResult">getResult</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#handleBatchRequest">handleBatchRequest</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#handleRequest">handleRequest</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#validateMessage">validateMessage</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#validateRequest">validateRequest</a></li><li data-type='method'><a href="JsonRpcServerProtocol.html#writeToClient">writeToClient</a></li></ul></li><li><a href="MessageBuffer.html">MessageBuffer</a><ul class='methods'><li data-type='method'><a href="MessageBuffer.html#getMessage">getMessage</a></li><li data-type='method'><a href="MessageBuffer.html#handleData">handleData</a></li><li data-type='method'><a href="MessageBuffer.html#isFinished">isFinished</a></li><li data-type='method'><a href="MessageBuffer.html#push">push</a></li></ul></li><li><a href="TcpClientFactory.html">TcpClientFactory</a><ul class='methods'><li data-type='method'><a href="TcpClientFactory.html#batch">batch</a></li><li data-type='method'><a href="TcpClientFactory.html#cleanUp">cleanUp</a></li><li data-type='method'><a href="TcpClientFactory.html#connect">connect</a></li><li data-type='method'><a href="TcpClientFactory.html#end">end</a></li><li data-type='method'><a href="TcpClientFactory.html#request">request</a></li><li data-type='method'><a href="TcpClientFactory.html#serverDisconnected">serverDisconnected</a></li><li data-type='method'><a href="TcpClientFactory.html#subscribe">subscribe</a></li><li data-type='method'><a href="TcpClientFactory.html#unsubscribe">unsubscribe</a></li><li data-type='method'><a href="TcpClientFactory.html#unsubscribeAll">unsubscribeAll</a></li></ul></li><li><a href="TcpClientProtocol.html">TcpClientProtocol</a><ul class='methods'><li data-type='method'><a href="TcpClientProtocol.html#batch">batch</a></li><li data-type='method'><a href="TcpClientProtocol.html#connect">connect</a></li><li data-type='method'><a href="TcpClientProtocol.html#end">end</a></li><li data-type='method'><a href="TcpClientProtocol.html#getBatchResponse">getBatchResponse</a></li><li data-type='method'><a href="TcpClientProtocol.html#getResponse">getResponse</a></li><li data-type='method'><a href="TcpClientProtocol.html#gotBatchResponse">gotBatchResponse</a></li><li data-type='method'><a href="TcpClientProtocol.html#handleBatch">handleBatch</a></li><li data-type='method'><a href="TcpClientProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="TcpClientProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="TcpClientProtocol.html#handleResponse">handleResponse</a></li><li data-type='method'><a href="TcpClientProtocol.html#listen">listen</a></li><li data-type='method'><a href="TcpClientProtocol.html#message">message</a></li><li data-type='method'><a href="TcpClientProtocol.html#notify">notify</a></li><li data-type='method'><a href="TcpClientProtocol.html#rejectPendingCalls">rejectPendingCalls</a></li><li data-type='method'><a href="TcpClientProtocol.html#request">request</a></li><li data-type='method'><a href="TcpClientProtocol.html#send">send</a></li><li data-type='method'><a href="TcpClientProtocol.html#setConnector">setConnector</a></li><li data-type='method'><a href="TcpClientProtocol.html#verifyData">verifyData</a></li><li data-type='method'><a href="TcpClientProtocol.html#write">write</a></li></ul></li><li><a href="TcpServerFactory.html">TcpServerFactory</a><ul class='methods'><li data-type='method'><a href="TcpServerFactory.html#buildProtocol">buildProtocol</a></li><li data-type='method'><a href="TcpServerFactory.html#close">close</a></li><li data-type='method'><a href="TcpServerFactory.html#listen">listen</a></li><li data-type='method'><a href="TcpServerFactory.html#sendNotification">sendNotification</a></li><li data-type='method'><a href="TcpServerFactory.html#setServer">setServer</a></li><li data-type='method'><a href="TcpServerFactory.html#setupListeners">setupListeners</a></li></ul></li><li><a href="TcpServerProtocol.html">TcpServerProtocol</a><ul class='methods'><li data-type='method'><a href="TcpServerProtocol.html#clientConnected">clientConnected</a></li><li data-type='method'><a href="TcpServerProtocol.html#getResult">getResult</a></li><li data-type='method'><a href="TcpServerProtocol.html#handleBatchRequest">handleBatchRequest</a></li><li data-type='method'><a href="TcpServerProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="TcpServerProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="TcpServerProtocol.html#handleRequest">handleRequest</a></li><li data-type='method'><a href="TcpServerProtocol.html#validateMessage">validateMessage</a></li><li data-type='method'><a href="TcpServerProtocol.html#validateRequest">validateRequest</a></li><li data-type='method'><a href="TcpServerProtocol.html#writeToClient">writeToClient</a></li></ul></li><li><a href="WsBrowserClientFactory.html">WsBrowserClientFactory</a><ul class='methods'><li data-type='method'><a href="WsBrowserClientFactory.html#batch">batch</a></li><li data-type='method'><a href="WsBrowserClientFactory.html#cleanUp">cleanUp</a></li><li data-type='method'><a href="WsBrowserClientFactory.html#connect">connect</a></li><li data-type='method'><a href="WsBrowserClientFactory.html#end">end</a></li><li data-type='method'><a href="WsBrowserClientFactory.html#request">request</a></li><li data-type='method'><a href="WsBrowserClientFactory.html#subscribe">subscribe</a></li><li data-type='method'><a href="WsBrowserClientFactory.html#unsubscribe">unsubscribe</a></li><li data-type='method'><a href="WsBrowserClientFactory.html#unsubscribeAll">unsubscribeAll</a></li></ul></li><li><a href="WsBrowserClientProtocol.html">WsBrowserClientProtocol</a><ul class='methods'><li data-type='method'><a href="WsBrowserClientProtocol.html#batch">batch</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#getBatchResponse">getBatchResponse</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#getResponse">getResponse</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#gotBatchResponse">gotBatchResponse</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#handleBatch">handleBatch</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#handleResponse">handleResponse</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#message">message</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#notify">notify</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#rejectPendingCalls">rejectPendingCalls</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#request">request</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#send">send</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#setConnector">setConnector</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#verifyData">verifyData</a></li><li data-type='method'><a href="WsBrowserClientProtocol.html#write">write</a></li></ul></li><li><a href="WsClientFactory.html">WsClientFactory</a><ul class='methods'><li data-type='method'><a href="WsClientFactory.html#batch">batch</a></li><li data-type='method'><a href="WsClientFactory.html#cleanUp">cleanUp</a></li><li data-type='method'><a href="WsClientFactory.html#connect">connect</a></li><li data-type='method'><a href="WsClientFactory.html#end">end</a></li><li data-type='method'><a href="WsClientFactory.html#request">request</a></li><li data-type='method'><a href="WsClientFactory.html#serverDisconnected">serverDisconnected</a></li><li data-type='method'><a href="WsClientFactory.html#subscribe">subscribe</a></li><li data-type='method'><a href="WsClientFactory.html#unsubscribe">unsubscribe</a></li><li data-type='method'><a href="WsClientFactory.html#unsubscribeAll">unsubscribeAll</a></li></ul></li><li><a href="WsClientProtocol.html">WsClientProtocol</a><ul class='methods'><li data-type='method'><a href="WsClientProtocol.html#batch">batch</a></li><li data-type='method'><a href="WsClientProtocol.html#connect">connect</a></li><li data-type='method'><a href="WsClientProtocol.html#end">end</a></li><li data-type='method'><a href="WsClientProtocol.html#getBatchResponse">getBatchResponse</a></li><li data-type='method'><a href="WsClientProtocol.html#getResponse">getResponse</a></li><li data-type='method'><a href="WsClientProtocol.html#gotBatchResponse">gotBatchResponse</a></li><li data-type='method'><a href="WsClientProtocol.html#handleBatch">handleBatch</a></li><li data-type='method'><a href="WsClientProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="WsClientProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="WsClientProtocol.html#handleResponse">handleResponse</a></li><li data-type='method'><a href="WsClientProtocol.html#listen">listen</a></li><li data-type='method'><a href="WsClientProtocol.html#message">message</a></li><li data-type='method'><a href="WsClientProtocol.html#notify">notify</a></li><li data-type='method'><a href="WsClientProtocol.html#rejectPendingCalls">rejectPendingCalls</a></li><li data-type='method'><a href="WsClientProtocol.html#request">request</a></li><li data-type='method'><a href="WsClientProtocol.html#send">send</a></li><li data-type='method'><a href="WsClientProtocol.html#setConnector">setConnector</a></li><li data-type='method'><a href="WsClientProtocol.html#verifyData">verifyData</a></li><li data-type='method'><a href="WsClientProtocol.html#write">write</a></li></ul></li><li><a href="WsServerFactory.html">WsServerFactory</a><ul class='methods'><li data-type='method'><a href="WsServerFactory.html#buildProtocol">buildProtocol</a></li><li data-type='method'><a href="WsServerFactory.html#close">close</a></li><li data-type='method'><a href="WsServerFactory.html#listen">listen</a></li><li data-type='method'><a href="WsServerFactory.html#sendNotification">sendNotification</a></li><li data-type='method'><a href="WsServerFactory.html#setServer">setServer</a></li><li data-type='method'><a href="WsServerFactory.html#setSever">setSever</a></li><li data-type='method'><a href="WsServerFactory.html#setupListeners">setupListeners</a></li></ul></li><li><a href="WsServerProtocol.html">WsServerProtocol</a><ul class='methods'><li data-type='method'><a href="WsServerProtocol.html#clientConnected">clientConnected</a></li><li data-type='method'><a href="WsServerProtocol.html#getResult">getResult</a></li><li data-type='method'><a href="WsServerProtocol.html#handleBatchRequest">handleBatchRequest</a></li><li data-type='method'><a href="WsServerProtocol.html#handleError">handleError</a></li><li data-type='method'><a href="WsServerProtocol.html#handleNotification">handleNotification</a></li><li data-type='method'><a href="WsServerProtocol.html#handleRequest">handleRequest</a></li><li data-type='method'><a href="WsServerProtocol.html#validateMessage">validateMessage</a></li><li data-type='method'><a href="WsServerProtocol.html#validateRequest">validateRequest</a></li><li data-type='method'><a href="WsServerProtocol.html#writeToClient">writeToClient</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="Jaysonic.html">Jaysonic</a></li></ul><h3>Global</h3><ul><li><a href="global.html#formatError">formatError</a></li><li><a href="global.html#formatRequest">formatRequest</a></li><li><a href="global.html#formatResponse">formatResponse</a></li></ul>
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<ul>
<li><a href="#jaysonic---a-persistent-json-rpc-client-and-server">Jaysonic - A persistent JSON-RPC client and server</a>
<ul>
<li><a href="#list-of-features">List of features</a></li>
<li><a href="#download--installation">Download &amp; Installation</a></li>
<li><a href="#initialization">Initialization</a>
<ul>
<li><a href="#ws-client-for-browser">WS Client for browser</a></li>
<li><a href="#ws-client-for-node">WS Client for Node</a></li>
</ul>
</li>
<li><a href="#options">Options</a></li>
<li><a href="#code-demos">Code Demos</a>
<ul>
<li><a href="#initialization-1">Initialization</a>
<ul>
<li><a href="#tcp">TCP</a></li>
<li><a href="#http">HTTP</a></li>
<li><a href="#ws">WS</a></li>
</ul>
</li>
<li><a href="#server-side">Server side</a>
<ul>
<li><a href="#instantiation-and-listening">Instantiation and Listening</a></li>
<li><a href="#closing-the-connection">Closing the connection</a></li>
<li><a href="#adding-methods">Adding Methods</a></li>
<li><a href="#listening-for-client-connections">Listening for client connections</a></li>
</ul>
</li>
<li><a href="#client-side">Client Side</a>
<ul>
<li><a href="#connecting">Connecting</a></li>
<li><a href="#listening-for-server-disconnect">Listening for server disconnect</a></li>
<li><a href="#making-requests">Making requests</a></li>
<li><a href="#subscriptions">Subscriptions</a></li>
<li><a href="#batch-requests">Batch Requests</a></li>
<li><a href="#http-client-requests">HTTP Client Requests</a></li>
</ul>
</li>
<li><a href="#notifications">Notifications</a>
<ul>
<li><a href="#client">Client</a></li>
<li><a href="#server">Server</a></li>
<li><a href="#batches">Batches</a></li>
</ul>
</li>
<li><a href="#http-client-notifications">HTTP Client Notifications</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#authors-or-acknowledgments">Authors or Acknowledgments</a></li>
<li><a href="#license">License</a></li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<p><img src="logo.png" alt=""></p>
<h1>Jaysonic - A persistent JSON-RPC client and server</h1>
<h2><a href="https://travis-ci.com/isaacgr/jaysonic"><img src="https://travis-ci.com/isaacgr/jaysonic.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/isaacgr/jaysonic?branch=master"><img src="https://coveralls.io/repos/github/isaacgr/jaysonic/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://codeclimate.com/github/isaacgr/jaysonic/maintainability"><img src="https://api.codeclimate.com/v1/badges/b061f4e44fa85d5e8b04/maintainability" alt="Maintainability"></a></h2>
<p>A TCP, HTTP and WebSocket server and client that implement the JSON-RPC 2.0 Specification.</p>
<h3>List of features</h3>
<ul>
<li>Promise based</li>
<li>Persistent connections</li>
<li>Notification subscriptions</li>
<li>Batching</li>
<li>TCP server/client</li>
<li>HTTP server/client</li>
<li>WebSocket server/client</li>
<li>WebSocket client supported in the browser</li>
<li>Automatic increment of request ID</li>
<li>Associate response ID with request</li>
</ul>
<h3>Download &amp; Installation</h3>
<pre class="prettyprint source lang-shell"><code>$ npm install jaysonic
</code></pre>
<h3>Initialization</h3>
<p>All clients and servers are instantiated with the same syntax, just change the type</p>
<pre class="prettyprint source lang-js"><code>// TCP
const server = new Jaysonic.server.tcp();
const client = new Jaysonic.client.tcp();
// HTTP
const server = new Jaysonic.server.http();
const client = new Jaysonic.client.http();
// WS
const wss = new Jaysonic.server.ws();
</code></pre>
<p><strong>Note that there are two web socket clients</strong><br>
<strong>One can only be run in the browser, and the other can run in a NodeJS environment.</strong></p>
<h4>WS Client for browser</h4>
<p>The browser ws client is based on the <code>window.WebSocket</code> class.</p>
<pre class="prettyprint source lang-js"><code>const Jaysonic = require(&quot;jaysonic/lib/client-ws&quot;);
const ws = new Jaysonic.wsclient();
</code></pre>
<h4>WS Client for Node</h4>
<p>The Node ws client is based on the <code>ws</code> library (same as the server).</p>
<pre class="prettyprint source lang-js"><code>const Jaysonic = require(&quot;jaysonic&quot;);
const ws = new Jaysonic.client.ws();
</code></pre>
<h3>Options</h3>
<p>The client and server support changing the JSON-RPC version and the delimiter used. Just pass them in the same object as the host and port to override the defaults.</p>
<h4>Client and server options</h4>
<p><code>host</code>: The host IP to serve from for the server, or to connect to by the client. Default is <code>127.0.0.1</code>. Note this is only available for the HTTP and TCP server/client. <br>
<code>port</code>: The host port to serve from for the server, or to connect to by the client. Default is <code>8100</code>. <br>
<code>delimiter</code>: Delimiter to break requests by. Defaults to <code>\n</code>. <br>
<code>version</code>: RPC version to use. Defaults to <code>2.0</code>.</p>
<h4>Client only options</h4>
<p><code>retries</code>: The number of retry attempts for the client to connect to the server. Default is <code>2</code>. <br>
<code>timeout</code>: The amount of time before a request times out. Will return a <code>-32000</code> error code. The default value is <code>30</code> (in seconds). <br>
<code>connectionTimeout</code>: The amount of time between connection retry attempts to a server. The default value is <code>5000</code> (in milliseconds).</p>
<h4>Other client and server options</h4>
<p>The TCP and HTTP server have an additional option specified by the <a href="https://nodejs.org/api/net.html#net_server_listen_options_callback">NodeJS Docs</a>.</p>
<p><code>exclusive</code>: If exclusive is false (default), then cluster workers will use the same underlying handle, allowing connection handling duties to be shared. When exclusive is true, the handle is not shared, and attempted port sharing results in an error.</p>
<p>The HTTP client supports additional options for the HTTP request.</p>
<p><code>method</code>: The method to make the request with. Default is <code>POST</code>.
<code>path</code>: The path to send the request to. Default is <code>/</code>.
<code>encoding</code>: How to encode the HTTP request. Will factor into content-length calculation. Default is <code>utf-8</code>.
<code>headers</code>: Headers to include in the request. Defaults provided by the spec are:</p>
<ul>
<li><code>&quot;Content-Length&quot;</code>
<ul>
<li>calculated by request message, this is not configurable</li>
</ul>
</li>
<li><code>&quot;Content-Type&quot;</code>
<ul>
<li>defaults to <code>&quot;application/json</code></li>
</ul>
</li>
<li><code>Accept</code>
<ul>
<li>defaults to <code>&quot;application/json&quot;</code></li>
</ul>
</li>
</ul>
<p>The WebSocket client supports an additional option in place of the host property.</p>
<p><code>url</code>: The web socket url to connect to. Default is <code>ws://127.0.0.1:8100</code>.</p>
<p>The WebSocket server is based on the ws library (https://github.com/websockets/ws).</p>
<p>It supports all of the options listed in their README. Typically changing the port is enough.</p>
<h3>Code Demos</h3>
<p>The default host and port for the server is <code>127.0.0.1:8100</code>. Based on the node <code>net.Server()</code> module.</p>
<p>The default host and port for the TCP client is <code>127.0.0.1:8100</code>. Based on the node <code>net.Socket()</code> module.</p>
<p>The default request URL for the HTTP client is <code>http://127.0.0.1:8100/</code>. Based on the node <code>http.ClientRequest</code> module.</p>
<p>The default url for the WS client is <code>ws://127.0.0.1:8100</code>. Based on the <code>WebSocket</code> module from JavaScript.</p>
<p>The default port for the WS Server is <code>8100</code>. Based on the <code>ws</code> library.</p>
<p>The default options will be used when instantiating the client or the server. Overrides can be provided by passing an object with the modifications.</p>
<h4>Initialization</h4>
<h6>TCP</h6>
<pre class="prettyprint source lang-js"><code>const Jaysonic = require(&quot;jaysonic&quot;);

// server with overrides
const server = new Jaysonic.server.tcp({
  host: &quot;127.0.0.1&quot;,
  port: 8100,
  delimiter: &quot;\n&quot;,
  version: 1
});
</code></pre>
<h6>HTTP</h6>
<pre class="prettyprint source lang-js"><code>const Jaysonic = require(&quot;jaysonic&quot;);

// client with overrides
const client = new Jaysonic.client.http({
    method: &quot;POST&quot;,
    headers: {
      &quot;Content-Type&quot;: &quot;application/json; charset=utf-8&quot;,
      Accept: &quot;application/json&quot;
    },
    path: &quot;/&quot;
  };
});
</code></pre>
<h6>WS</h6>
<p><code>wsclient</code> class can only be used in the browser.
<code>client.ws</code> cannot be used in the browser.</p>
<pre class="prettyprint source lang-js"><code>const Jaysonic = require(&quot;jaysonic&quot;);
const socket = require(&quot;jaysonic/lib/client-ws&quot;);

// client and server with overrides

// client in the browser
const ws = new socket.wsclient({
  url: &quot;ws://127.0.0.1:8100&quot;
});
// or to work in node
const ws = new Jaysonic.client.ws({
  url: &quot;ws://127.0.0.1:8100&quot;
});

const wss = new Jaysonic.server.ws({
  port: 8100
});
</code></pre>
<h4>Server side</h4>
<h5>Instantiation and Listening</h5>
<pre class="prettyprint source lang-js"><code>const Jaysonic = require(&quot;jaysonic&quot;);

const server = new Jaysonic.server.tcp();

server
  .listen()
  .then(({ host, port }) => {
    console.log(`Server listening on ${host}:${port}`);
  })
  .catch((error) => {
    console.log(`Unable to start server, ${error}`);
  });
</code></pre>
<h5>Closing the connection</h5>
<pre class="prettyprint source lang-js"><code>server
  .close()
  .then(() => {
    // do something
  })
  .catch((error) => {
    // error when trying to close the connection
  });
</code></pre>
<h5>Adding Methods</h5>
<pre class="prettyprint source lang-js"><code>server.method(&quot;add&quot;, ([a, b]) => a + b);

// can also add named
const add = ([a, b]) => a + b;

server.method(&quot;add&quot;, add);

// or promises
const add = ([a, b]) =>
  new Promise((resolve, reject) => {
    resolve(a + b);
  });

server.method(&quot;add&quot;, add);
</code></pre>
<p><em>Note: The same syntax for all the above methods is used for the HTTP and WS server</em></p>
<h5>Listening for client connections</h5>
<p>The <code>clientConnected</code> and <code>clientDisconnected</code> methods return the host and port of the client in the callback. These methods are not available for the HTTP server.</p>
<pre class="prettyprint source lang-js"><code>server.clientConnected(({ host, port }) => {
  console.log(&quot;client connected&quot;);
});

server.clientDisconnected(({ host, port }) => {
  console.log(&quot;client disconnected&quot;);
});
</code></pre>
<h4>Client Side</h4>
<h5>Connecting</h5>
<pre class="prettyprint source lang-js"><code>const Jaysonic = require(&quot;jaysonic&quot;);
const client = new Jaysonic.client.tcp();

client
  .connect()
  .then(({ host, port }) => {
    console.log(`Client connected on ${host}:${port}`);
  })
  .catch((error) => {
    console.log(`Client unable to connect, ${error}`);
  });
</code></pre>
<p><strong>Note that the HTTP client does not have a connect() method and can just begin making requests to the server.</strong></p>
<h5>Listening for server disconnect</h5>
<p>The <code>serverDisconnected</code> method fires a callback when the server is disconnected.</p>
<pre class="prettyprint source lang-js"><code>client.serverDisconnected(() => {
  // do something
});
</code></pre>
<h5>Ending the connection</h5>
<p>The TCP client accepts an optional callback function to .end()</p>
<pre class="prettyprint source lang-js"><code>client.end();
// or
client.end(() => console.log(&quot;connection ended&quot;));
</code></pre>
<p>The websocket clients accept an optional status code and reason for closing per https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close</p>
<pre class="prettyprint source lang-js"><code>client.end(1009, &quot;Message too big&quot;);
</code></pre>
<h5>Making requests</h5>
<p>Requests can only be made once connection is established.</p>
<pre class="prettyprint source lang-js"><code>client
  .connect()
  .then(({ host, port }) => {
    add();
  })
  .catch((error) => {
    console.log(`Client unable to connect, ${error}`);
  });

const add = () => {
  client
    .request()
    .send(&quot;add&quot;, [1, 2])
    .then((result) => {
      console.log(result);
      // {jsonrpc: &quot;2.0&quot;, result: 3, id: 1}
    })
    .catch((error) => {
      console.log(error);
    });
};
</code></pre>
<h5>Subscriptions</h5>
<p>Clients can subscribe to notifications from the server.</p>
<p><strong>Note: Subscriptions are not supported by the HTTP server/client</strong><br>
<strong>Notifications no longer return an error as the first parameter in the callback as of v2.0.0</strong></p>
<pre class="prettyprint source lang-js"><code>client.subscribe(&quot;notification&quot;, (message) => {
  console.log(message);
  // {jsonrpc: &quot;2.0&quot;, method: &quot;notification&quot;, params: []}
});
server.notify([[&quot;notification&quot;, []]]);
</code></pre>
<p><strong>The websocket browser client returns an object with a 'detail' key which contains the notification as of v2.0.0</strong></p>
<pre class="prettyprint source lang-js"><code>wsclient.subscribe(&quot;notification&quot;, ({ detail }) => {
  console.log(detail);
  // {jsonrpc: &quot;2.0&quot;, method: &quot;notification&quot;, params: []}
});
wsserver.notify([[&quot;notification&quot;, []]]);
</code></pre>
<p>A client can also unsubscribe a method from a notification, or unsubscribe all methods from a notification. This requires the callback function to be named, else it wont be able to remove it.</p>
<pre class="prettyprint source lang-js"><code>client.unsubscribe(&quot;notification&quot;, callback);
client.unsubscribeAll(&quot;notification&quot;);
</code></pre>
<h5>Batch Requests</h5>
<pre class="prettyprint source lang-js"><code>client
  .connect()
  .then(({ host, port }) => {
    add();
  })
  .catch((error) => {
    console.log(`Client unable to connect, ${error}`);
  });

const add = () =>
  client
    .batch([
      // access the message object on the request
      client.request().message(&quot;add&quot;, [1, 2]),
      client.request().message(&quot;add&quot;, [3, 4])
    ])
    .then((result) => {
      // [
      //   {jsonrpc: &quot;2.0&quot;, result: 3, id: 1},
      //   {jsonrpc: &quot;2.0&quot;, result: 7, id: 2}
      // ]
    })
    .catch((error) => {
      console.log(error);
    });
</code></pre>
<p>The same syntax is used for the HTTP client</p>
<h5>HTTP Client Requests</h5>
<p>The HTTP Client will include additional information about the response, as per nodes <code>http.IncomingMessage</code> method. See more <a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage">here</a>.</p>
<p>The HTTP client response and error are objects with a <code>body</code> property, which contains the json response from the server, as well as the <code>http.IncomingMessage</code> instance. Which contains things like the header and statusCode. All methods can be found <a href="https://www.w3schools.com/nodejs/obj_http_incomingmessage.asp">here</a>.</p>
<p>Additionally, the <code>error</code> object contains a <code>response</code> property that provides the body of the erroneous response.</p>
<pre class="prettyprint source lang-js"><code>client
  .request()
  .send(&quot;add&quot;, [1, 2])
  .then((result) => {
    console.log(result.body);
    // 3
    console.log(result.statusCode);
    // 200
  })
  .catch((error) => {
    console.log(error);
  });
</code></pre>
<h4>Notifications</h4>
<h5>Client</h5>
<p>Clients can send notifications to the server.</p>
<p>The server can also listen for all notifications not tied to methods and handle accordingly.</p>
<p><strong>Note as of v2.0.0 server.onNotify no longer returns an error as the fist parameter to the callback</strong></p>
<pre class="prettyprint source lang-js"><code>// optionally returns a promise indicating success or failure for sending message
client.request().notify(&quot;notify&quot;, []);

server.onNotify(&quot;notify&quot;, (message) => {
  console.log(message);
  // {jsonrpc: &quot;2.0&quot;, method: &quot;notify&quot;, params: []}
});
</code></pre>
<p>A server can also unsubscribe a method from a notification, or unsubscribe all methods from a notification. This requires the callback function to be named, else it wont be able to remove it.</p>
<pre class="prettyprint source lang-js"><code>server.unsubscribeOnNotify(&quot;notification&quot;, callback);
server.unsubscribeAllOnNotify(&quot;notification&quot;);
</code></pre>
<h5>Server</h5>
<p>The server can send notifications to the client. This can be done individually or in a batch.</p>
<p><strong>Note: As of v2.0.0 notifications from the server are sent as a list of lists, instead of just supplying the method and params. This was done to handle batch notifications.</strong></p>
<p><code>server.notify</code> will return a list of error objects if there was a problem sending the notification out to any client, or if no clients are connected. The error of one client will not affect the notification being sent out to the rest of the clients.</p>
<pre class="prettyprint source lang-js"><code>// optionally returns a promise indicating success or failure for sending message
client.subscribe(&quot;notify&quot;, callback);

// send a single notification
server.notify([[&quot;notify&quot;, []]]);

// send a batch of notifications
server.notify([
  [&quot;notify&quot;, []],
  [&quot;test&quot;, [1, 2, 3]]
]);
</code></pre>
<p>As of v2.0.0, notifications sent and recieved in batches are now supported</p>
<h5>Batches</h5>
<pre class="prettyprint source lang-js"><code>// send from the client by setting the 3rd parameter in the request().message() method to false
client.batch([client.request().message(&quot;test&quot;, [], false)]);

// send from server by providing a list of arrays containing
// a method and optional params value
server.notify([[&quot;notification&quot;, [&quot;a&quot;, 1]], [&quot;browser&quot;]]);
</code></pre>
<p>As per the JSON-RPC spec for HTTP, a notification response must include a <code>204</code> status code, with an empty response body. The HTTP Client will resolve a response object if it receives this response, and reject it otherwise.</p>
<h4>HTTP Client Notifications</h4>
<pre class="prettyprint source lang-js"><code>// optionally returns a promise indicating success or failure for sending message
client
  .request()
  .notify(&quot;notify&quot;, [])
  .then((response) => {
    console.log(response.statusCode);
    // 204
  })
  .catch((error) => {
    console.log(error);
  });

server.onNotify(&quot;notify&quot;, (message) => {
  console.log(message);
  // {jsonrpc: &quot;2.0&quot;, method: &quot;notify&quot;, params: []}
});
</code></pre>
<h3>Contributing</h3>
<p>Definitely welcome. I tried to account for everything in the spec, but issues come up of course.</p>
<p>Keep it simple. Keep it minimal. Make sure all tests pass and no linting errors.</p>
<h3>Authors or Acknowledgments</h3>
<ul>
<li>Isaac Rowell</li>
</ul>
<h3>License</h3>
<p>This project is licensed under the MIT License</p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Mon Oct 12 2020 10:57:20 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>